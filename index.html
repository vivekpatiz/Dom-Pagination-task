<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dom Pagination Task</title>
   
    <style>
      .p-50 {
        padding: 50px;
      }

      .active {
        background-color: #666;
        color: white;
      }
    </style>
  </head>

  <body>
    <div class="container p-50">
      <div class="row p-3">
        <select
          id="selectRow"
          class="form-control col-3 text-light bg-dark"
          onchange="createPagination();rowsTodisplay();"
        >
          <option value="sel">Choose no.of rows to display</option>
        </select>
      </div>

      <table class="table table-dark">
        <thead>
          <th>Id</th>
          <th>Name</th>
          <th>E-mail</th>
        </thead>
        <tbody id="tbody">
          <!--rows will come here-->
        </tbody>
      </table>
      <input type="hidden" id="hiddenInitial" />
      <input type="hidden" id="hiddenLast" />
      <ul class="pagination" id="pagination">
  <!--pagination will append here-->
      </ul>
    </div>
    <script>
      var selectRow = document.getElementById("selectRow");
      var pagination = document.getElementById("pagination");
      var tbody = document.getElementById("tbody");
      var hiddenInitial = parseInt(document.getElementById("hiddenInitial"))
        .value;
      var hiddenLast = parseInt(document.getElementById("hiddenLast")).value;

      var jsonData = [
        {
          id: "1",
          name: "Lura Senger",
          email: "Xander_Collier@yahoo.com",
        },
        {
          id: "2",
          name: "Wilburn Weber",
          email: "Bennett_Kreiger11@yahoo.com",
        },
        {
          id: "3",
          name: "Tyrique Hahn",
          email: "Juston.Altenwerth@yahoo.com",
        },
        {
          id: "4",
          name: "Lenny Bailey",
          email: "Guiseppe_Hegmann@yahoo.com",
        },
        {
          id: "5",
          name: "Vladimir Keeling",
          email: "Louisa_Walsh18@hotmail.com",
        },
        {
          id: "6",
          name: "Kellie Crona",
          email: "Chandler_Abernathy@yahoo.com",
        },
        {
          id: "7",
          name: "Carolina White",
          email: "Royal50@hotmail.com",
        },
        {
          id: "8",
          name: "Alfredo Conn",
          email: "Clarabelle34@hotmail.com",
        },
        {
          id: "9",
          name: "Stan Shanahan",
          email: "Lamar.McClure@hotmail.com",
        },
        {
          id: "10",
          name: "Marvin Fay",
          email: "Osbaldo58@hotmail.com",
        },
        {
          id: "11",
          name: "Torrance Rau",
          email: "Orin45@gmail.com",
        },
        {
          id: "12",
          name: "Harold Gutmann MD",
          email: "Alyce.Stracke37@yahoo.com",
        },
        {
          id: "13",
          name: "Taryn Torphy",
          email: "Dean_Breitenberg71@hotmail.com",
        },
        {
          id: "14",
          name: "Bryana Lang",
          email: "Tatum.Ullrich@yahoo.com",
        },
        {
          id: "15",
          name: "Nyasia Green DDS",
          email: "Dino83@gmail.com",
        },
        {
          id: "16",
          name: "Nasir Gerhold",
          email: "Lilian_Bashirian8@hotmail.com",
        },
        {
          id: "17",
          name: "Raymundo Ritchie PhD",
          email: "Antwan.Schoen15@yahoo.com",
        },
        {
          id: "18",
          name: "Delmer Marvin",
          email: "Kiera62@yahoo.com",
        },
        {
          id: "19",
          name: "Rachel Wilkinson",
          email: "Foster_Conroy@gmail.com",
        },
        {
          id: "20",
          name: "Gladys Howell",
          email: "Constance.Labadie10@yahoo.com",
        },
        {
          id: "21",
          name: "Ciara Klocko",
          email: "Harvey76@yahoo.com",
        },
        {
          id: "22",
          name: "Quentin O'Kon",
          email: "Amely_Cummings2@yahoo.com",
        },
        {
          id: "23",
          name: "Ms. Gabriella Kunde",
          email: "Lorenza_Cummerata@hotmail.com",
        },
        {
          id: "24",
          name: "Gerald Reilly",
          email: "Lia_Konopelski@gmail.com",
        },
        {
          id: "25",
          name: "Brody Carter I",
          email: "Colten.Wilderman90@hotmail.com",
        },
        {
          id: "26",
          name: "Alanis Klocko",
          email: "Johathan.Champlin69@gmail.com",
        },
        {
          id: "27",
          name: "Caroline Miller",
          email: "Delaney.Kozey74@gmail.com",
        },
        {
          id: "28",
          name: "Ms. Merritt McClure",
          email: "Wendy.Zieme@gmail.com",
        },
        {
          id: "29",
          name: "Jovani Schoen",
          email: "Norval_Zieme@hotmail.com",
        },
        {
          id: "30",
          name: "Berniece Bradtke",
          email: "Okey.Fisher39@hotmail.com",
        },
        {
          id: "31",
          name: "Hanna Gottlieb",
          email: "Edna62@hotmail.com",
        },
        {
          id: "32",
          name: "Christiana Bergnaum",
          email: "Donnie.Paucek22@gmail.com",
        },
        {
          id: "33",
          name: "Reid Stehr",
          email: "Hiram69@gmail.com",
        },
        {
          id: "34",
          name: "Evans Ward",
          email: "Liliane72@hotmail.com",
        },
        {
          id: "35",
          name: "Miss Enos Davis",
          email: "Kolby.Grady@hotmail.com",
        },
        {
          id: "36",
          name: "Mathew Lueilwitz",
          email: "Mariah.Hagenes@yahoo.com",
        },
        {
          id: "37",
          name: "Romaine Robel",
          email: "Sheila19@yahoo.com",
        },
        {
          id: "38",
          name: "Immanuel Aufderhar",
          email: "Aileen32@hotmail.com",
        },
        {
          id: "39",
          name: "Julius Reilly Jr.",
          email: "Santa89@yahoo.com",
        },
        {
          id: "40",
          name: "Linnea Borer",
          email: "Jarrett_Hegmann2@hotmail.com",
        },
        {
          id: "41",
          name: "Misael Abernathy IV",
          email: "Robbie42@yahoo.com",
        },
        {
          id: "42",
          name: "Mr. Gerda Jerde",
          email: "Gustave36@hotmail.com",
        },
        {
          id: "43",
          name: "Easton Daugherty",
          email: "Malcolm.Schuster11@hotmail.com",
        },
        {
          id: "44",
          name: "Leanna Gutkowski",
          email: "Chelsea9@gmail.com",
        },
        {
          id: "45",
          name: "Rollin Trantow",
          email: "Marques_Hickle26@gmail.com",
        },
        {
          id: "46",
          name: "Heaven Luettgen",
          email: "Lonnie.Greenfelder95@hotmail.com",
        },
        {
          id: "47",
          name: "Gilda Huel",
          email: "Stephania.Hintz@gmail.com",
        },
        {
          id: "48",
          name: "Javon Walker",
          email: "Lamar_Bailey39@yahoo.com",
        },
        {
          id: "49",
          name: "Stewart King",
          email: "Chasity_Jenkins82@gmail.com",
        },
        {
          id: "50",
          name: "Cortez Lueilwitz",
          email: "Lelia.Mitchell43@gmail.com",
        },
        {
          id: "51",
          name: "Ora Kilback",
          email: "Matt25@gmail.com",
        },
        {
          id: "52",
          name: "Lera Macejkovic",
          email: "Jamal.Donnelly45@hotmail.com",
        },
        {
          id: "53",
          name: "Asa Gottlieb",
          email: "Carolyne.Langosh@yahoo.com",
        },
        {
          id: "54",
          name: "Avery Nienow",
          email: "Hudson_Bernhard47@yahoo.com",
        },
        {
          id: "55",
          name: "Dr. Katrine Ryan",
          email: "Colten40@gmail.com",
        },
        {
          id: "56",
          name: "Florida Kulas",
          email: "Alejandra_Bernhard@yahoo.com",
        },
        {
          id: "57",
          name: "Mauricio Gerlach",
          email: "Vincenza_Gusikowski84@hotmail.com",
        },
        {
          id: "58",
          name: "Chadrick Simonis",
          email: "Reymundo.Doyle@gmail.com",
        },
        {
          id: "59",
          name: "Beau Jenkins",
          email: "Cletus65@hotmail.com",
        },
        {
          id: "60",
          name: "Camilla Cole",
          email: "Eda48@yahoo.com",
        },
        {
          id: "61",
          name: "Abagail MacGyver",
          email: "Jevon.Koch@hotmail.com",
        },
        {
          id: "62",
          name: "Ludwig Prohaska",
          email: "Eldon_DuBuque37@yahoo.com",
        },
        {
          id: "63",
          name: "Berenice Hane",
          email: "Lonnie3@gmail.com",
        },
        {
          id: "64",
          name: "Abel Durgan",
          email: "Marlee.Weimann42@gmail.com",
        },
        {
          id: "65",
          name: "Tate Kuhlman",
          email: "Hope31@yahoo.com",
        },
        {
          id: "66",
          name: "Mrs. Hermina Daniel",
          email: "Murphy59@yahoo.com",
        },
        {
          id: "67",
          name: "Marcelino Nienow",
          email: "Estefania_Dibbert97@hotmail.com",
        },
        {
          id: "68",
          name: "Raphaelle Connelly",
          email: "Josie.Legros70@yahoo.com",
        },
        {
          id: "69",
          name: "Mina Heaney",
          email: "Pete.Hermann79@hotmail.com",
        },
        {
          id: "70",
          name: "Jaida Torp",
          email: "Jonatan82@yahoo.com",
        },
        {
          id: "71",
          name: "Megane Fadel",
          email: "Dandre82@yahoo.com",
        },
        {
          id: "72",
          name: "Angelo Schimmel V",
          email: "Frederic54@hotmail.com",
        },
        {
          id: "73",
          name: "Jaren Ferry DDS",
          email: "Kristian.Kilback@yahoo.com",
        },
        {
          id: "74",
          name: "Annette O'Connell",
          email: "Domenica.Christiansen@gmail.com",
        },
        {
          id: "75",
          name: "Elenor Rohan PhD",
          email: "Alvera.Huel48@yahoo.com",
        },
        {
          id: "76",
          name: "Linnie Beier",
          email: "Reece_Berge@gmail.com",
        },
        {
          id: "77",
          name: "Maybelle Lehner",
          email: "Arlo.Hagenes@gmail.com",
        },
        {
          id: "78",
          name: "Hailie Haag",
          email: "Edythe.Lind59@hotmail.com",
        },
        {
          id: "79",
          name: "Marcelina Schuppe",
          email: "Kip.Cummerata77@gmail.com",
        },
        {
          id: "80",
          name: "Ezra Lang",
          email: "Garret.Swaniawski@hotmail.com",
        },
        {
          id: "81",
          name: "Carey Kiehn",
          email: "Sabrina70@gmail.com",
        },
        {
          id: "82",
          name: "Carole Aufderhar",
          email: "Efrain.Schamberger77@hotmail.com",
        },
        {
          id: "83",
          name: "Fanny Beatty",
          email: "Ewald28@yahoo.com",
        },
        {
          id: "84",
          name: "Mina Lubowitz",
          email: "Vincenzo.Herman@gmail.com",
        },
        {
          id: "85",
          name: "Anabelle Thiel",
          email: "Amely.Renner@hotmail.com",
        },
        {
          id: "86",
          name: "Gerry Homenick",
          email: "Ada_Von54@hotmail.com",
        },
        {
          id: "87",
          name: "Domenico Maggio",
          email: "Freeman.Stamm@yahoo.com",
        },
        {
          id: "88",
          name: "Mauricio Bradtke III",
          email: "Alford83@yahoo.com",
        },
        {
          id: "89",
          name: "Bulah Yost III",
          email: "Nicolas_Schimmel6@yahoo.com",
        },
        {
          id: "90",
          name: "Orville Dibbert DDS",
          email: "Bryana_Herzog@yahoo.com",
        },
        {
          id: "91",
          name: "Autumn Osinski",
          email: "Davin8@hotmail.com",
        },
        {
          id: "92",
          name: "Levi Gibson",
          email: "Deangelo69@gmail.com",
        },
        {
          id: "93",
          name: "Reva McKenzie",
          email: "Bret40@hotmail.com",
        },
        {
          id: "94",
          name: "Jensen Pfannerstill",
          email: "Dax_Marquardt@hotmail.com",
        },
        {
          id: "95",
          name: "Tyrese Larson MD",
          email: "Cecelia85@yahoo.com",
        },
        {
          id: "96",
          name: "Dayne Sanford",
          email: "Tyrique_Waters16@hotmail.com",
        },
        {
          id: "97",
          name: "Jeramy Steuber",
          email: "Catalina.Stehr24@yahoo.com",
        },
        {
          id: "98",
          name: "Madge Bogisich",
          email: "Joey.Marquardt50@gmail.com",
        },
        {
          id: "99",
          name: "Casimer MacGyver",
          email: "Julius.Bednar96@yahoo.com",
        },
        {
          id: "100",
          name: "Arlene Kassulke",
          email: "Josiane_Smith@yahoo.com",
        },
      ];

      // dropdown values
      for (i = 5; i <= 100; i += 5) {
        var option = document.createElement("option");
        option.innerText = i;
        option.value = i;
        selectRow.append(option);
      }

      for (var i in jsonData) {
        createNewRow(jsonData[i].id, jsonData[i].name, jsonData[i].email);
      }

      function createNewRow(id, name, email) {
        var tr = document.createElement("tr");

        var td = document.createElement("td");
        td.innerText = id;

        var td1 = document.createElement("td");
        td1.innerText = name;

        var td2 = document.createElement("td");
        td2.innerText = email;

        tr.append(td, td1, td2);
        tbody.append(tr);
      }

      function createPagination() {
        var selectValue = parseInt(document.getElementById("selectRow").value);
        pagination.innerHTML = "";

        createLi(selectValue, "First");
        createLi(selectValue, "Previous");

        for (var i = selectValue; i <= 100; ) {
          createLi(selectValue, i);
          i += selectValue;
        }
        createLi(selectValue, "Next");
        createLi(selectValue, "Last");
      }

      function rowsTodisplay(text, a) {
        var limit;
        var initial;
        var selValue = parseInt(document.getElementById("selectRow").value);
        var activeId = document.getElementById("active");

        var First = document.getElementById("First");
        var Previous = document.getElementById("Previous");
        var Next = document.getElementById("Next");
        var Last = document.getElementById("Last");

        var activeVal;

        if (activeId) activeVal = document.getElementById("active").innerText;

        tbody.innerHTML = "";

//active class for anchor tag
        if (text && activeId && activeVal != text) {
          activeId.classList.remove("active");
          activeId.removeAttribute("id");
          a.classList.add("active");
          a.setAttribute("id", "active");
        }

        //handling limit and init values for different scenarios

        if (!text || text == "First") {
          limit = parseInt(document.getElementById("selectRow").value);
          initial = 0;
        } else if (typeof text == "number") {
          limit = text;
          initial = text - selValue;
        } else if (text == "Last") {
          limit = 100;
          initial = 100 - selValue;
        } else if (text == "Previous") {
          limit = hiddenLast - selValue + 1;
          initial = limit - selValue;
        } else if (text == "Next") {
          initial = hiddenLast + 1;
          limit = initial + selValue; 
        }
          //Handling array out of bound
        if (limit < 100) limit = limit;
        else limit = 100;

        if (initial > 0) initial = initial;
        else initial = 0;


        for (var i = initial; i < limit; i++) {
          createNewRow(jsonData[i].id, jsonData[i].name, jsonData[i].email);
        }

        //setting hidden values for referring purpose
        hiddenInitial = initial;
        hiddenLast = i - 1;
        // console.log(hiddenInitial);
        // console.log(hiddenLast);

//Adding disabled class for first,next,prev,last
        if (hiddenInitial == 0) {
          First.classList.add("disabled");
          Previous.classList.add("disabled");
        } else {
          First.classList.remove("disabled");
          Previous.classList.remove("disabled");
        }
        if (hiddenLast == 99) {
          Next.classList.add("disabled");
          Last.classList.add("disabled");
        } else {
          Next.classList.remove("disabled");
          Last.classList.remove("disabled");
        }
       
      }

      function createLi(selectValue, innerTextVal) {
        var li = document.createElement("li");
        li.setAttribute("class", "page-item");
        li.setAttribute("id", innerTextVal);

        var a = document.createElement("a");
        a.setAttribute("class", "page-link");
        a.setAttribute("href", "#");
        a.innerText = innerTextVal;

        //add active class for select dropdown onchange
        if (selectValue == innerTextVal) {
          a.classList.add("active");
          a.setAttribute("id", "active");
        }
     
        a.addEventListener("click", function () {
          rowsTodisplay(innerTextVal, a);
        });
        li.append(a);
        pagination.append(li);
    }
    </script>
  </body>
</html>
